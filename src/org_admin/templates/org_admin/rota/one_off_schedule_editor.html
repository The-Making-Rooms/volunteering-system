<!-- rota/one_off_schedule_editor.html -->
{% extends 'org_admin/navigation_template.html' %}

{% block page_content %}

    {% if schedule.role %}
                <button
        class="btn btn-primary btn-sm mb-3"
        type="submit"
        hx-get="/org_admin/rota/role/{{ schedule.role.id }}/"
        hx-target=".htmx-navigator"
        hx-swap="outerHTML"
        >
            ↩ Back
        </button>
    {% else %}
        <button
        class="btn btn-primary btn-sm mb-3"
        type="submit"
        hx-get="/org_admin/rota/{{ opp }}/"
        hx-target=".htmx-navigator"
        hx-swap="outerHTML"
        >
            ↩ Back
        </button>
    {% endif %}

    <div class="p-5 rounded-lg bg-base-200 mb-3 flex flex-col">
        <p class="text-2xl font-bold">
            {% if schedule %}
                Schedule Editor
            {% else %}
                New Schedule
            {% endif %}
        </p>

        <div class="divider"></div>

        <form class="flex flex-col">
            {% csrf_token %}
            <div class="flex gap-5">
                <div class="flex flex-col">
                <label for="date">Date:</label>

                <input
                  class="input"
                  type="date"
                  id="date"
                  {% if schedule %}value="{{ schedule.date|date:"Y-m-d" }}"{% endif %}
                  name="schedule_date"
                  min={% now "Y-m-d" %}
                  required />
            </div>

            <div class="flex flex-col">
                <label for="start_time">Start Time:</label>

                <input
                  class="input"
                  type="time"
                  id="start_time"
                  {% if schedule %}value="{{ schedule.start_time|date:"H:i" }}"{% endif %}
                  name="schedule_start_time"
                  required />
            </div>

            <div class="flex flex-col">
                <label for="end_time">End time:</label>

                <input
                  class="input"
                  type="time"
                  id="end_time"
                  {% if schedule %}value="{{ schedule.end_time|date:"H:i" }}"{% endif %}
                  name="schedule_end_time"
                  required />
            </div>

            </div>

            <button
                class="btn btn-primary btn-sm my-3 w-20"
                type="submit"
                hx-swap="outerHTML"
                hx-target=".htmx-navigator"
                hx-post={% if schedule %}"/org_admin/rota/schedule/{{ schedule.id }}/"{% else %}{% if role %}"/org_admin/rota/schedule/new/{{ opp }}/{{ role }}/"{% else %}"/org_admin/rota/schedule/new/{{ opp }}/"{% endif %}{% endif %}
            >Submit</button>


        </form>

    </div>


{% endblock %}